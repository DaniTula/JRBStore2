{% extends "base.html" %}

{% block title %}JRBStore2 - Productos{% endblock %}

{% block content %}

<!-- Navbar similar a la de la p√°gina principal,
     pero sin barra de b√∫squeda y con el nombre del m√≥dulo en el centro -->
<nav class="navbar navbar-dark bg-primary py-1">
  <div class="container-fluid px-2">

    <!-- Nombre de la tienda -->
    <a class="navbar-brand fw-bold fs-5 me-2" href="{% url 'home' %}">
      JRBStore
    </a>

    <!-- Nombre del m√≥dulo en el centro (solo en pantallas medianas hacia arriba) -->
    <div class="flex-grow-1 d-none d-md-flex justify-content-center">
      <span class="navbar-text text-white">
        M√≥dulo de stock en la tienda
      </span>
    </div>

    <!-- Enlaces de autenticaci√≥n (mismo estilo que en la home) -->
    <div class="d-flex align-items-center text-white ms-2">
      <a href="#" class="text-white text-decoration-none me-1">
        Iniciar sesi√≥n
      </a>
      <span class="mx-1">/</span>
      <a href="#" class="text-white text-decoration-none ms-1">
        Registrarse
      </a>
    </div>
  </div>
</nav>

<div class="container py-3">

  <!-- Bot√≥n para volver a la tienda, debajo de la barra -->
  <div class="mb-3">
    <a href="{% url 'home' %}" class="btn btn-outline-primary">
      ‚Üê Volver a la tienda
    </a>
  </div>

  <!-- T√≠tulo y bot√≥n para crear producto -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Productos</h4>
    <a href="{% url 'product_create' %}" class="btn btn-primary">
      ‚ûï Agregar producto
    </a>
  </div>

  <!-- Buscador (visual por ahora) -->
  <form class="mb-3">
    <div class="input-group">
      <input type="text"
             class="form-control"
             placeholder="Buscar producto" />
      <button class="btn btn-outline-secondary" type="button">
        Buscar
      </button>
    </div>
  </form>

  <!-- Tabla de productos -->
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-light">
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>G√©neros</th>
            <th>Consola</th>
            <th>Formato</th>
            <th>Estado</th>
            <th>Precio</th>
            <th>Imagen</th>
            <th>Stock</th>
            <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for producto in productos %}
          <tr>
            <td>{{ producto.id }}</td>
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.generos.all|join:", " }}</td>
            <td>{{ producto.plataforma }}</td>
            <td>{{ producto.get_formato_display }}</td>
            <td>{{ producto.get_estado_display }}</td>
            <td>${{ producto.valor }}</td>
            <td>
              {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}"
                     alt="{{ producto.nombre }}"
                     class="img-thumbnail"
                     style="max-width: 60px;" />
              {% else %}
                <span class="text-muted">Sin imagen</span>
              {% endif %}
            </td>
            <td>{{ producto.stock }}</td>
            <td>
              <a href="{% url 'product_edit' producto.pk %}" class="btn btn-sm btn-warning">
                ‚úèÔ∏è
              </a>
              <a href="{% url 'product_delete' producto.pk %}" class="btn btn-sm btn-danger">
                üóëÔ∏è
              </a>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="9" class="text-center text-muted">
              No hay productos registrados a√∫n.
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}

